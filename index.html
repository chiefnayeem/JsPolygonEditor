<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Polygon Editor on Custom Canvas</title>
    <link rel="stylesheet" type="text/css" href="./PolygonEditor.css" />
    <!-- <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css"> -->
</head>

<body>
    <h2 class="title">Polygon Editor</h2>
    <div class="action-buttons">
        <button onclick="POLYGON_EDITOR.setDrawMode(true);">Draw</button>
        <button onclick="POLYGON_EDITOR.setDragMode(true);">Drag</button>
        <button onclick="POLYGON_EDITOR.setEraserMode(true);">Eraser</button>
    </div>

    <div>
        <div style="text-align: right;" id="zoomPercent">0%</div>
        <input 
            type="range" 
            min="1" 
            max="5" 
            step="0.0000005" 
            value="1" 
            oninput="POLYGON_EDITOR.zoomEditor(this); document.querySelector('#zoomPercent').innerHTML = calculatePercentage(this.value) + '%';" 
            style="width: 100%;"
        />
    </div>

    <div class="action-buttons">
        <button onclick="POLYGON_EDITOR.setEditorData(exampleEditorData1);">Add Example Data 1</button>
        <button onclick="POLYGON_EDITOR.setEditorData(exampleEditorData2);">Add Example Data 2</button>
        <button onclick="POLYGON_EDITOR.changeComponentBackground('https://i.stack.imgur.com/Bxlnz.jpg');">Change
            Background Image</button>
    </div>
    <div class="editor-container">
        <div class="polygon-editor no-tool-selected"></div>
    </div>
    <textarea id="editorData" rows="5"></textarea>


    <!-- <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/d3js/3.5.9/d3.min.js"></script> -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="./PolygonEditor.js"></script>

    <script>
        const exampleEditorData1 = [{ "fill": "#A966B6", "points": [[390, 159.6875], [376, 367.6875], [623, 266.6875]], "opacity": 0.4 }, { "fill": "#CD0CA8", "points": [[338, 213.4875030517578], [156, 298.48748779296875], [290, 291.48748779296875]], "opacity": 0.4 }];

        const exampleEditorData2 = [{ "fill": "#A966B6", "points": [[390, 159.6875], [376, 367.6875], [623, 266.6875]], "opacity": 0.4, "transformPoints": { "x": 0, "y": 0 } }, { "fill": "#97B52C", "points": [[50, 121.88749694824219], [60, 365.88751220703125], [257, 274.88751220703125], [139, 260.88751220703125], [262, 178.8874969482422]], "opacity": 0.4, "transformPoints": { "x": 0, "y": 0 } }, { "fill": "#1B8309", "points": [[686, 124.88749694824219], [620, 353.88751220703125], [772, 327.88751220703125], [772, 24.887500762939453]], "opacity": 0.4, "transformPoints": { "x": 0, "y": 0 } }];

        const POLYGON_EDITOR = new PolygonEditor({
            wrapperElementSelector: '.polygon-editor',
            backgroundImageSrc: 'https://www.thai-property-group.com/wp-content/uploads/2019/06/Plan-bureau-Bangkok.jpg',
            editorData: [
                {
                    "fill": "#A966B6",
                    "points": [
                        [
                            390,
                            159.6875
                        ],
                        [
                            376,
                            367.6875
                        ],
                        [
                            623,
                            266.6875
                        ]
                    ],
                    "opacity": 0.4,
                    transformPoints: {
                        x: 0,
                        y: 0,
                    }
                }
            ],
            onChangeEditorData(data) {
                document.querySelector("#editorData").value = JSON.stringify(data);
            }
        });

        POLYGON_EDITOR.init();
    </script>
</body>

</html>