<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Polygon Editor on Custom Canvas</title>
    <link rel="stylesheet" type="text/css" href="./PolygonEditor.css" />
</head>

<body>
    <h2 class="title">Polygon Editor</h2>
    <div>
        <button onclick="POLYGON_EDITOR.populateEditorData(exampleEditorData1);">Add Example Data 1</button>
        <button onclick="POLYGON_EDITOR.populateEditorData(exampleEditorData2);">Add Example Data 2</button>
    </div>
    <div class="polygon-editor"></div>
    <textarea id="editorData" rows="5"></textarea>

    <script src="https://cdn.jsdelivr.net/d3js/3.5.9/d3.min.js"></script>
    <script src="./PolygonEditor.js"></script>

    <script>
        const exampleEditorData1 = [{ "fill": "#A966B6", "points": [[390, 159.6875], [376, 367.6875], [623, 266.6875]], "opacity": 0.4 }, { "fill": "#CD0CA8", "points": [[338, 213.4875030517578], [156, 298.48748779296875], [290, 291.48748779296875]], "opacity": 0.4 }];

        const exampleData2 = [{ "fill": "#A966B6", "points": [[390, 159.6875], [376, 367.6875], [623, 266.6875]], "opacity": 0.4 }, { "fill": "#5BD739", "points": [[172, 256.48748779296875], [116, 445.48748779296875], [232, 430.48748779296875], [258, 321.48748779296875]], "opacity": 0.4 }, { "fill": "#5BAAC1", "points": [[310, 96.48750305175781], [280, 206.4875030517578], [205, 92.48750305175781], [254, 121.48750305175781], [278, 53.48749923706055]], "opacity": 0.4 }, { "fill": "#38A324", "points": [[518, 36.48749923706055], [679, 268.48748779296875], [581, 385.48748779296875], [753, 345.48748779296875], [700, 48.48749923706055], [577, 64.48750305175781]], "opacity": 0.4 }, { "fill": "#E8C6F1", "points": [[237, 462.48748779296875], [438, 492.48748779296875], [477, 398.48748779296875], [335, 368.48748779296875]], "opacity": 0.4 }, { "fill": "#9C5CC0", "points": [[35, 195.4875030517578], [42, 308.48748779296875], [169, 243.4875030517578], [92, 198.4875030517578], [69, 248.4875030517578]], "opacity": 0.4 }];

        const POLYGON_EDITOR = new PolygonEditor({
            wrapperElementSelector: '.polygon-editor',
            backgroundImageSrc: 'https://www.thai-property-group.com/wp-content/uploads/2019/06/Plan-bureau-Bangkok.jpg',
            editorData: [
                {
                    "fill": "#A966B6",
                    "points": [
                        [
                            390,
                            159.6875
                        ],
                        [
                            376,
                            367.6875
                        ],
                        [
                            623,
                            266.6875
                        ]
                    ],
                    "opacity": 0.4
                }
            ],
            onChangeEditorData(data) {
                console.log(data);
                document.querySelector("#editorData").value = JSON.stringify(data);
            }
        });

        POLYGON_EDITOR.init();
    </script>
</body>

</html>